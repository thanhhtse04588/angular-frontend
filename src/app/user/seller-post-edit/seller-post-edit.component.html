<div class="container row py-5 wow fadeIn grey lighten-3 min-vh-100">
      <!--Grid column-->
      <div class="col-md-3 ">
<app-seller-menu></app-seller-menu>
      </div>
      <!--Grid column-->
      <div class="col-md-9">

        <div class="text-center">

          <div class="h3 text-center">CHỈNH SỬA TIN ĐĂNG</div>
          <p>(Quý vị nhập thông tin nhà đất cần bán hoặc cho thuê vào các mục dưới đây)</p>
          <div *ngIf="!loginService.isUserLoggedIn()" class="alert alert-warning" role="alert">
            Bạn cần <strong style="cursor: pointer;" title="Đăng nhập ở góc trên bên phải màn hình">đăng nhập</strong>
            để
            thực hiện chức năng này
          </div>
        </div>
        <form [formGroup]="form" (ngSubmit)="postPlace()">

          <!-- page 1 -->
          <mdb-card class="mb-3">
            <mdb-card-header>
              <div class="h4">Thông tin cơ bản</div>
            </mdb-card-header>
            <mdb-card-body>
              <!-- title -->
              <div class="md-form mb-5">
                <input mdbInput type="text" id="title" formControlName="title" class="form-control" mdbInput
                  mdbValidate>
                <label for="title">
                  Tiêu đề<span class="text-danger">*</span>
                </label>
                <mdb-error *ngIf="title.invalid && (title.dirty || title.touched)">
                  Yêu cầu từ 10-100 ký tự
                </mdb-error>
              </div>
              <!--Grid row-->
              <div class="row">
                <!-- districtID -->
                <div class="col-lg-4 col-md-12 mb-4">
                  <label for="districtID">Quận/Huyện <span class="text-danger">*</span></label>
                  <select class="custom-select d-block w-100 form-control" formControlName="districtID"
                    (change)="onDistrictChange()" (change)="updateAddress()">
                    <option *ngFor="let item of districts" [ngValue]="item">{{item.district}}</option>
                  </select>
                  <mdb-error class="pl-3" style="padding-top: 30px;"
                    *ngIf="districtID.invalid && (districtID.dirty || districtID.touched)">
                    Không bỏ trống
                  </mdb-error>
                </div>

                <!-- wardID -->
                <div class="col-lg-4 col-md-12 mb-4">
                  <label for="wardID">Phường/Xã<span class="text-danger">*</span></label>
                  <select class="custom-select d-block w-100 form-control" formControlName="wardID"
                    (change)="updateAddress()" (change)="onWardChange()">
                    <option *ngFor="let item of wards" [ngValue]="item">{{item.wardName}}</option>
                  </select>
                  <mdb-error class="pl-3" style="padding-top: 30px;"
                    *ngIf="wardID.invalid && (wardID.dirty || wardID.touched)">
                    Không bỏ trống
                  </mdb-error>
                </div>

                <!-- streetID -->
                <div class="col-lg-4 col-md-12 mb-4">
                  <label for="streetID">Đường/phố<span class="text-danger">*</span></label>
                  <select class="custom-select d-block w-100 form-control" formControlName="streetID"
                    (change)="updateAddress()">
                    <option *ngFor="let item of streets" [ngValue]="item">{{item.streetName}}</option>
                  </select>
                  <mdb-error class="pl-3" style="padding-top: 30px;"
                    *ngIf="streetID.invalid && (streetID.dirty || streetID.touched)">
                    Không bỏ trống
                  </mdb-error>
                </div>

              </div>

              <div class="row">
                <!-- roleOfPlaceID -->
                <div class="col-lg-4 col-md-12 mb-4">
                  <label for="country">Loại nhà đất <span class="text-danger">*</span></label>
                  <select class="custom-select d-block w-100 form-control" formControlName="roleOfPlaceID">
                    <option *ngFor="let item of roleOfPlaces | async" [ngValue]="item.roleOfPlaceID">{{item.roleName}}
                    </option>
                  </select>
                  <mdb-error class="pl-3" style="padding-top: 30px;"
                    *ngIf="roleOfPlaceID.invalid && (roleOfPlaceID.dirty || roleOfPlaceID.touched)">
                    Không bỏ trống
                  </mdb-error>
                </div>

                <!-- area -->
                <div class="col-lg-4 col-md-12 md-form mb-4">
                  <label class="pl-3" for="area">Diện tích m²<span class="text-danger">*</span></label>
                  <input mdbInput type="number" id="area" formControlName="area" class="form-control" mdbInput
                    mdbValidate>
                  <mdb-error class="pl-3" *ngIf="area.invalid && (area.dirty || area.touched)">
                    Không bỏ trống
                  </mdb-error>
                </div>

                <!-- price -->
                <div class="col-lg-4 col-md-12 md-form mb-4">
                  <label class="pl-3" for="pricePlace">Giá (vnđ/tháng)<span class="text-danger">*</span></label>
                  <input mdbInput type="number" id="pricePlace" formControlName="pricePlace" class="form-control" mdbInput
                    mdbValidate>
                  <p>{{pricePlace.value | currency:' ':'symbol':'2.0'}} </p>
                  <mdb-error class="pl-3" *ngIf="pricePlace.invalid && (pricePlace.dirty || pricePlace.touched)">
                    Không bỏ trống
                  </mdb-error>
                </div>

              </div>
              <hr>
            </mdb-card-body>
          </mdb-card>

          <!-- page2 -->
          <mdb-card class="mb-3">
            <mdb-card-header>
              <div class="h3">Thông tin mô tả</div>
            </mdb-card-header>
            <mdb-card-body>
              <mdb-card-title>Tối đa 3000 ký tự.<span class="text-danger">*</span></mdb-card-title>
              <p>
                Giới thiệu chung về bất động sản của bạn. Ví dụ: Khu nhà có vị trí thuận lợi: Gần công viên, gần
                trường học ... Tổng diện tích 52m2, đường đi ô tô vào tận cửa.
                <span class="text-danger">Lưu ý: tin rao chỉ để mệnh giá tiền Việt Nam Đồng.</span></p>
              <!-- descriptions -->
              <div class="md-form">
                <textarea type="text" id="descriptions" formControlName="descriptions" class="md-textarea form-control"
                  mdbInput></textarea>
                <mdb-error *ngIf="descriptions.invalid && (descriptions.dirty || descriptions.touched)">
                  Vui lòng nhập thông tin mô tả. Tối thiểu là 30 ký tự và tối đa là 3000 ký tự.
                </mdb-error>
                <label for="descriptions">Mô tả chi tiết</label>
              </div>
              <hr>
            </mdb-card-body>
          </mdb-card>
          <!-- page 3 -->
          <mdb-card class="mb-3">
            <mdb-card-header>
              <div class="h3">Thông tin khác</div>
            </mdb-card-header>
            <mdb-card-body>
              <p>Quý vị nên điền đầy đủ thông tin vào các mục dưới đây để đăng tin có hiệu quả hơn.</p>
              <div class="row">
                <!-- homeDirection -->
                <div class="col-lg-4 col-md-12 mb-4">
                  <label for="homeDirection">Hướng nhà</label>
                  <select class="custom-select d-block w-100 form-control" formControlName="homeDirection">
                    <option *ngFor="let item of homeDirections" [ngValue]="item">{{item}}</option>
                  </select>
                </div>

                <!-- frontispiece -->
                <div class="col-lg-4 col-md-12 md-form mb-4">
                  <label class="pl-3" for="frontispiece">Mặt tiền m²</label>
                  <input mdbInput type="number" id="frontispiece" formControlName="frontispiece"
                    class="form-control">
                </div>
              </div>

              <div class="row">
                <!-- numberFloors -->
                <div class="col-lg-4 col-md-12 md-form mb-4">
                  <label class="pl-3" for="numberFloors">Số tầng</label>
                  <input mdbInput type="number" id="numberFloors" formControlName="numberFloors" class="form-control"
                    mdbValidate>
                  <mdb-error class="pl-3" *ngIf="numberFloors.invalid && (numberFloors.dirty || numberFloors.touched)">
                    Không hợp lệ
                  </mdb-error>
                </div>
                <!-- numberBedrooms -->
                <div class="col-lg-4 col-md-12 md-form mb-4">
                  <label class="pl-3" for="numberBedrooms">Số phòng ngủ</label>
                  <input mdbInput type="number" id="numberBedrooms" formControlName="numberBedrooms"
                    class="form-control" mdbValidate>
                  <mdb-error class="pl-3"
                    *ngIf="numberBedrooms.invalid && (numberBedrooms.dirty || numberBedrooms.touched)">
                    Không hợp lệ
                  </mdb-error>
                </div>
                <!-- numberToilets -->
                <div class="col-lg-4 col-md-12 md-form mb-4">
                  <label class="pl-3" for="numberToilets">Số phòng vệ sinh</label>
                  <input mdbInput type="number" id="numberToilets" formControlName="numberToilets" class="form-control"
                    mdbValidate>
                  <mdb-error class="pl-3"
                    *ngIf="numberToilets.invalid && (numberToilets.dirty || numberToilets.touched)">
                    Không hợp lệ
                  </mdb-error>
                </div>
              </div>
              <hr>
            </mdb-card-body>
          </mdb-card>
          <!-- page 4 -->
          <mdb-card class="mb-3">
            <mdb-card-header>
              <div class="h3">Thông tin nội thất</div>
            </mdb-card-header>
            <mdb-card-body>
              <!-- listEquip -->
              <form [formGroup]="eqmTable">
                <table mdbTable bordered="true" small="true">
                  <thead class="text-nowrap">
                    <th scope="col">Tên<span class="text-danger">*</span></th>
                    <th scope="col">Số lượng<span class="text-danger">*</span></th>
                    <th scope="col">Giá trị(vnđ)<span class="text-danger">*</span></th>
                    <th scope="col">Độ mới(%)</th>
                    <th scope="col">Mô tả</th>
                    <th scope="col"></th>
                  </thead>
                  <tbody>
                    <ng-container formArrayName="tableRows"
                      *ngFor="let group of getFormControls.controls ; let i=index">
                      <tr mdbTableCol *ngIf="group.get('isEditable').value" [formGroupName]="i">
                        <td>
                          <input matInput type="text" id="name" class="form-control" formControlName="name">
                        </td>
                        <td>
                          <input matInput type="number" id="quantity" class="form-control" formControlName="quantity"
                            >
                        </td>
                        <td>
                          <input matInput type="number" id="price" class="form-control" formControlName="price">
                        </td>
                        <td>
                          <input matInput type="number" id="likeNew" class="form-control" formControlName="likeNew">
                        </td>
                        <td>
                          <textarea matInput type="text" formControlName="equipmentDescrible" id="equipmentDescrible"
                            class="md-textarea form-control"></textarea>
                          <!-- <input mdbInput matInput type="text" id="equipmentDescrible" class="form-control" formControlName="equipmentDescrible"> -->
                        </td>
                        <td>
                          <button mdbBtn class="btn-danger" size="sm" (click)="deleteRow(i)" mdbWavesEffect>Xóa</button>
                          <button mdbBtn class="btn-primary" size="sm" [disabled]="eqmTable.invalid"
                            (click)="doneRow(group)" mdbWavesEffect>Lưu</button>
                        </td>
                      </tr>
                      <tr *ngIf="!group.get('isEditable').value">
                        <td>
                          {{group.get('name').value}}
                        </td>
                        <td>
                          {{group.get('quantity').value}}
                        </td>
                        <td>
                          {{group.get('price').value}}
                        </td>
                        <td>
                          {{group.get('likeNew').value}}
                        </td>
                        <td>
                          {{group.get('equipmentDescrible').value}}
                        </td>
                        <td>
                          <button mdbBtn class="btn-warning" size="sm" (click)="editRow(group)"
                            mdbWavesEffect>Sửa</button>
                        </td>
                      </tr>
                    </ng-container>
                  </tbody>
                </table>
                <div class="action-container">
                  <button mdbBtn class="btn-success mx-auto" size="sm" [disabled]="eqmTable.invalid" (click)="addRow()"
                    mdbWavesEffect>Thêm</button>
                </div>
              </form>
              <hr>
            </mdb-card-body>
          </mdb-card>
          <!-- page 5 -->
          <app-upload (onUpload)='uploadHandler($event)'></app-upload>
          <!-- page 6 -->
          <mdb-card class="mb-3">
            <mdb-card-header>
              <div class="h3">Bản đồ</div>
            </mdb-card-header>
            <mdb-card-body>
              <p>Để tăng độ tin cậy và tin rao được nhiều người quan tâm hơn, hãy sửa vị trí tin rao của bạn trên bản đồ
                bằng
                cách
                Chọn lại vị trí bản đồ</p>
              <div class="form-group ">
                <label>Kiểm tra lại địa chỉ</label>
                <input type="text" id="map" class="form-control" (keydown.enter)="$event.preventDefault()"
                  autocorrect="off" autocapitalize="off" spellcheck="off" #search>
              </div>

              <agm-map style="height: 600px;" (mapReady)="mapReady($event)" [latitude]="latitude" [longitude]="longitude" [zoom]="zoom">
                <agm-marker [latitude]="latitude" [longitude]="longitude" [markerDraggable]="true"
                  (dragEnd)="markerDragEnd($event)">
                </agm-marker>
              </agm-map>

              <p>Có thể dữ liệu bản đồ không chính xác. Vì vậy nếu có bất kỳ sai xót nào xin bạn hãy báo cho chúng tôi
                để
                khắc
                phục kịp thời.</p>
              <hr>
            </mdb-card-body>
          </mdb-card>

          <!-- page 7 -->
          <mdb-card class="mb-3">
            <mdb-card-header>
              <div class="h3">Liên hệ xem nhà</div>
            </mdb-card-header>
            <mdb-card-body>
              <div class="row">
                <!-- contactName -->
                <div class="col-lg-4 col-md-12 md-form mb-4">
                  <label class="pl-3" for="contactName">Tên liên hệ<span class="text-danger">*</span></label>
                  <input mdbInput type="text" id="contactName" formControlName="contactName" class="form-control"
                    mdbInput mdbValidate>
                  <mdb-error class="pl-3" *ngIf="contactName.invalid && (contactName.dirty || contactName.touched)">
                    Không bỏ trống
                  </mdb-error>
                </div>

                <!-- contactAddress -->
                <div class="col-lg-4 col-md-12 md-form mb-4">
                  <label class="pl-3" for="contactAddress">Địa chỉ liên hệ</label>
                  <input mdbInput type="text" id="contactAddress" formControlName="contactAddress" class="form-control">
                </div>

                <!-- phoneNumber -->
                <div class="col-lg-4 col-md-12 md-form mb-4">
                  <label class="pl-3" for="phoneNumber">Số điện thoại liên hệ<span class="text-danger">*</span></label>
                  <input mdbInput type="number" id="phoneNumber" formControlName="phoneNumber" class="form-control"
                    mdbValidate>
                  <mdb-error class="pl-3" *ngIf="phoneNumber.invalid && (phoneNumber.dirty || phoneNumber.touched)">
                    Không bỏ trống
                  </mdb-error>
                </div>
              </div>
              <div class="row">
                <!-- email -->
                <div class="col-lg-4 col-md-12 md-form mb-4">
                  <label class="pl-3" for="email">Email</label>
                  <input mdbInput type="email" id="email" formControlName="email" class="form-control" mdbValidate>
                </div>

                <!-- checkingDate -->
                <div class="col-lg-4 col-md-12  mb-4">
                  <label for="checkingDate">Ngày xem nhà</label>
                  <input mdbInput type="date" id="checkingDate" formControlName="checkingDate" class="form-control"
                    mdbValidate>
                  <mdb-error class="pl-3 pt-5"
                    *ngIf="checkingDate.invalid && (checkingDate.dirty || checkingDate.touched)">
                    Ngày không hợp lệ
                  </mdb-error>
                </div>
              </div>
            </mdb-card-body>
            <mdb-card-footer>
              <div *ngIf="!form.valid || !loginService.isUserLoggedIn() || !isDoneUpload" class="alert alert-warning"
                role="alert">
                Vui lòng điền thông tin đầy đủ theo yêu cầu 
                <!-- {{roleOfPlaceID.valid}}
                {{districtID.valid}}
                {{wardID.valid}}
                {{streetID.valid}}
                {{area.valid}}
                {{pricePlace.valid}}
                {{descriptions.valid}}
                {{frontispiece.valid}}
                {{homeDirection.valid}}
                {{numberFloors.valid}}
                {{numberBedrooms.valid}}
                {{numberToilets.valid}}
                {{contactName.valid}}
                {{contactAddress.valid}}
                {{phoneNumber.valid}}
                {{email.valid}}
                {{checkingDate.valid}} -->
              </div>
              <!-- <p>{{updatePlaceForm | json}}</p> -->
              <button type="submit" mdbBtn color="warning" size="md"
                [disabled]="!form.valid || !loginService.isUserLoggedIn() || !isDoneUpload" mdbWavesEffect> Lưu chỉnh sửa</button>
              <button type="button" mdbBtn color="danger" size="md" routerLink="/user/seller/post-manage"
                mdbWavesEffect>Hủy</button>
            </mdb-card-footer>
          </mdb-card>
        </form>
      </div>
    </div>