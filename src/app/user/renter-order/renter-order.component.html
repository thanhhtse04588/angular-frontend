<body class="grey lighten-3 min-vh-100 wow fadeIn">
  <div class="container ">
    <div class="row py-5">

      <div class="col-md-3 ">
        <app-renter-menu></app-renter-menu>
      </div>

      <div class="col-md-9 ">
        <div class="text-center mb-3 ">
          <div class="h3 text-center">DANH SÁCH LỊCH ĐĂNG KÝ XEM NHÀ</div>
          <p>(Quý vị có thể quản lý, tìm kiếm ở đây)</p>
        </div>

        <div *ngFor="let order of orders">
          <div class="card mb-3">
            <div class="card-header">
              <div class="h5">{{order.title}}</div>
            </div>
            <div class="card-body px-5">
              <div>
                <div class="row">
                  <div class="col">
                    <p><strong>Họ tên: </strong>{{order.name}}</p>
                    <p><strong>Số điện thoại: </strong>{{order.phoneNumber}}</p>
                    <p><strong>Lời nhắn: </strong>{{order.message}}</p>
                  </div>
                  <div class="col">
                    <p><strong>Email: </strong>{{order.email}}</p>
                    <p><strong>Thời gian: </strong>{{order.dateTime | date:'short' }}</p>
                    <p><strong>Thông tin nhà: </strong>
                      <a mat-button (click)="sharedService.placeDetail(order.placeID)">Xem</a>
                    </p>
                    <div ><strong>Trạng thái nhà:</strong><div class="text-warning h6">{{order.placeStatus}}</div></div>

                  </div>
                  <div class="col">
                    <div *ngIf="isInProcess(order.orderStatusID)">
                      <a *ngIf="!isDeal(order.orderStatusID)" (click)="onEdit(order)"  (click)='comfirmEdit.show()' style="width: 110px;" class="float-right"
                         mat-stroked-button color="warn"  > Sửa </a>

                    <a (click)="item = order" (click)='comfirmCancel.show()' style="width: 110px;" class="float-right"
                       mat-stroked-button color="accent"  > Hủy </a>
                  </div>
                  </div>
                </div>
                <span class="float-right h5 pr-2">
                  <mdb-badge [color]="statusOrderColor(order.orderStatusID)">{{order.orderStatus}}</mdb-badge>
                </span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

</body>

<!-- Cancel comfirm -->
<div mdbModal #comfirmCancel="mdbModal" class="modal fade" tabindex="-1" role="dialog"
  aria-labelledby="myBasicModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-notify modal-danger" role="document">
    <div class="modal-content">
      <div class="modal-body">
        <div class="h5">Bạn có chắc chắn muốn HỦY</div>
      </div>
      <div class="modal-footer">
        <a type="button" mat-stroked-button color="accent"  (click)="comfirmCancel.hide()" (click)="onReject()"
           >Đồng ý </a>
        <a type="button" mat-stroked-button color="accent"   (click)="comfirmCancel.hide()"
           >Bỏ qua</a>
      </div>
    </div>
  </div>
</div>
<!-- Edit comfirm -->
<div mdbModal #comfirmEdit="mdbModal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myBasicModalLabel"
  aria-hidden="true">
  <div class="modal-dialog modal-notify modal-danger" role="document">
    <div class="modal-content">
      <div class="modal-body">
        <div class="h5">Bạn có chắc chắn muốn CHỈNH SỬA</div>
      </div>
      <div class="modal-footer">
        <a type="button" mat-stroked-button color="warn" (click)="editModal.show()" 
          (click)="comfirmEdit.hide()"  >Đồng ý </a>
        <a type="button" mat-stroked-button color="warn"   (click)="comfirmEdit.hide()"
           >Bỏ qua</a>
      </div>
    </div>
  </div>
</div>

<div mdbModal #editModal="mdbModal" class="modal fade" tabindex="-1" role="dialog" aria-hidden="true">
  <form (ngSubmit)="onSave(editOrderForm)" [formGroup]="editOrderForm">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="card">
          <div class="card-header">
            <div class="h4 text-center">Mẫu đăng ký đặt lịch xem nhà</div>
          </div>
          <div class="card-body p-5">
            <div class="row mb-3">
              <div class="col">
                <label  >Nhập Tên<span class="red-text">*</span></label>
                <input type="text" class="form-control"   formControlName="name">
                <small class="red-text"  *ngIf="sharedService.checkValidateInput(name)">
                      Không hợp lệ
                </small>
              </div>

              <div class="col  ">
                <label  >Nhập Email<span class="red-text">*</span></label>
                <input type="text" class="form-control"   formControlName="email">
                <small class="red-text"  *ngIf="sharedService.checkValidateInput(email)">
                  Không hợp lệ
                </small>
              </div>
            </div>
            <div class="  mb-5">
              <label>Số điện thoại<span class="red-text">*</span></label>
              <input type="text" class="form-control"   formControlName="phoneNumber">
              <small class="red-text"  *ngIf="sharedService.checkValidateInput(phoneNumber)">
                Không hợp lệ
              </small>
            </div>
            <div class="  mb-3">
              <div>Ngày xem nhà<span class="red-text">*</span></div>
              <input type="datetime-local" class="form-control"     formControlName="dateTime">
              <small class="red-text" *ngIf="sharedService.checkValidateInput(dateTime)">
                Không hợp lệ
              </small>
            </div>

            <div class=" ">
              <label for="form8">Lời nhắn</label>
              <textarea type="text" class="md-textarea form-control" rows="1"    
                formControlName="message"></textarea>
              <small class="red-text"  *ngIf="sharedService.checkValidateInput(message)">
                Không hợp lệ
              </small>
            </div>
            <button type="submit" [disabled]="!editOrderForm.valid || isSubmit" mat-raised-button color="warn" class="btn-block" (click)="editModal.hide()"
               >
              <span [ngClass]="{'spinner-border spinner-border-sm' : isSubmit}"> </span>
              Lưu</button>
            <button type="button" mat-raised-button color="primary"
              (click)="editModal.hide()"  >Đóng</button>
          </div>
        </div>
      </div>
    </div>
  </form>
</div>