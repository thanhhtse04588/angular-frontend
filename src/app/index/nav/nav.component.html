<mat-sidenav-container class="sidenav-container">
  <mat-sidenav #drawer class="sidenav" fixedInViewport [attr.role]="(isHandset$ | async) ? 'dialog' : 'navigation'"
    [mode]="(isHandset$ | async) ? 'over' : 'side'" [opened]="(isHandset$ | async) === false">
    <mat-toolbar>Menu</mat-toolbar>
    <mat-nav-list>
      <a mat-list-item href="#">Link 1</a>
      <a mat-list-item href="#">Link 2</a>
      <a mat-list-item href="#">Link 3</a>
    </mat-nav-list>
  </mat-sidenav>
  <mat-sidenav-content>
    <mat-toolbar color="primary">
      <button type="button" aria-label="Toggle sidenav" mat-icon-button (click)="drawer.toggle()"
        *ngIf="isHandset$ | async">
        <mat-icon aria-label="Side nav toggle icon">menu</mat-icon>
      </button>
        <a class="white-text" routerLink="/places/home">
          <i class="fas fa-home"></i>Cyber Place
        </a>

        <button mat-button [matMenuTriggerFor]="renter" routerLink="/user/renter">Kênh người mua</button>
<mat-menu #renter="matMenu">
  <button mat-menu-item>Item 1</button>
  <button mat-menu-item>Item 2</button>
</mat-menu>

        <button mat-button [matMenuTriggerFor]="seller" routerLink="/user/seller">Kênh người bán</button>
<mat-menu #seller="matMenu">
  <button mat-menu-item>Item 1</button>
  <button mat-menu-item>Item 2</button>
</mat-menu>
<div class="flex-spacer"></div>

<button *ngIf="loginService.isAdmin();else post" routerLink="/admin" mat-raised-button type="button" color="warn"  >
  <strong>Admin</strong></button>

  <ng-template #post>
        <button routerLink="/user/seller/post" mat-raised-button color="primary"
             >
            <strong>Đăng tin rao</strong></button>
</ng-template>
<ng-container *ngIf="!loginService.isUserLoggedIn();else logOut">
      <a class="white-text" 
          (click)="frameSignin.show()">
          Đăng ký
      </a>
      <a class="white-text" 
          (click)="frameLogin.show()">
          Đăng nhập
      </a>
</ng-container>

<ng-template #logOut>
      <a class="nav-link">
       <small>Xin chào </small><span class="font-weight-bolder white-text">{{loginService.currentUserValue.userName | slice:0:10}}</span>
      </a>

      <a  (click)="loginService.logOut()">
          <i class="fas fa-sign-out-alt"></i>
      </a>
</ng-template>
    </mat-toolbar>
    <!-- Add Content Here -->
  </mat-sidenav-content>
</mat-sidenav-container>


<!-- Login Modal -->
<form [formGroup]="validatingLoginForm" (ngSubmit)="checkLogin()">
  <div mdbModal #frameLogin="mdbModal" class="modal fade down" id="frameModalTop" tabindex="-1" role="dialog"
      aria-labelledby="myModalLabel" aria-hidden="true">
      <div class="modal-dialog" role="document">
          <div class="modal-content  p-5">
              <div class="h4 mb-5 text-center">Đăng nhập</div>

              <input type="text" formControlName="loginFormModalUsername" class="form-control"
                  placeholder="Tên đăng nhập">
              <small
                  *ngIf="loginFormModalUsername.invalid && (loginFormModalUsername.touched || loginFormModalUsername.dirty)"
                  class="form-text text-muted">
                  <span class="float-left red-text">Không hợp lệ</span>
              </small>

              <input type="password" formControlName="loginFormModalPassword" class="form-control mt-4"
                  placeholder="Mật khẩu">
              <small
                  *ngIf="loginFormModalPassword.invalid && (loginFormModalPassword.touched || loginFormModalPassword.dirty)"
                  class="form-text text-muted">
                  <span class="float-left red-text">Không hợp lệ</span>
              </small>
              <!-- Sign in button -->
              <button mat-raised-button color="primary"  class="btn-block mt-5 mb-4" type="submit"
                  [disabled]="!validatingLoginForm.valid || isLoginSubmit">
                  <span [ngClass]="{'spinner-border spinner-border-sm' : isLoginSubmit}"> </span> Đăng nhập</button>

              <!-- Register -->
              <p class="text-center">Bạn chưa có tài khoản?
                  <a class="light-blue-text mx-2" (click)='frameSignin.show();frameLogin.hide()'>Đăng ký</a>
              </p>
              <!-- Social login -->
              <p class="text-center">Đăng nhập với : <a class="light-blue-text mx-2" role="button"
                      (click)="loginService.googleSignin();frameLogin.hide()">
                      <i fab icon="google"></i>
                  </a></p>
          </div>
      </div>
  </div>
</form>
<!-- /Login Modal -->

<!-- Signin Modal -->
<form [formGroup]="validatingSigninForm" (ngSubmit)=doSignup()>
  <div mdbModal #frameSignin="mdbModal" class="modal fade down" id="frameModalTop" tabindex="-1" role="dialog"
      aria-labelledby="myModalLabel" aria-hidden="true">
      <div class="modal-dialog" role="document">
          <div class="modal-content p-5 ">
              <div class="mb-5 text-center h4">Đăng ký</div>

              <div class="form-row">
                  <div class="col">
                      <input type="text" formControlName="firstName" class="form-control" placeholder="Tên">
                      <small class="form-text text-muted mb-4">Yêu cầu <span
                              class="float-left red-text">*</span></small>
                  </div>
                  <div class="col">
                      <input type="text" formControlName="lastName" class="form-control" placeholder="Họ">
                  </div>
              </div>
              <!--User name -->
              <input type="text" formControlName="username" class="form-control" placeholder="Tên đăng nhập">
              <small class="form-text text-muted mb-4 ">Yêu cầu <span class="float-left red-text">*</span></small>

              <!-- Password -->
              <input type="password" formControlName="password" class="form-control" placeholder="Mật khẩu"
                  aria-describedby="defaultRegisterFormPasswordHelpBlock">
              <small class="form-text text-muted mb-4">
                  <span class="float-left red-text">*</span>Mật khẩu ít nhất 6 đến 32 ký tự
              </small>

              <!-- Password -->
              <input type="password" formControlName="confirmPasswrd" class="form-control"
                  placeholder="Nhập lại mật khẩu" aria-describedby="defaultRegisterFormPasswordHelpBlock">

              <button mat-raised-button color="primary" class="btn-block my-4"
                  [disabled]="!validatingSigninForm.valid || isSigninSubmit" type="submit"> <span
                      [ngClass]="{'spinner-border spinner-border-sm' : isSigninSubmit}"> </span> Đăng ký</button>

              <!-- Social register -->
              <p class="text-center">Đăng ký với : <a class="light-blue-text mx-2" role="button"
                      (click)="loginService.googleSignin();frameSignin.hide()">
                      <i fab icon="google"></i>
                  </a></p>
          </div>
      </div>
  </div>
</form>
<nav class="navbar navbar-expand-lg navbar-light bg-light">
  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarTogglerDemo03" aria-controls="navbarTogglerDemo03" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>
  <a class="navbar-brand" href="#">Navbar</a>

  <div class="collapse navbar-collapse" id="navbarTogglerDemo03">
    <ul class="navbar-nav mr-auto mt-2 mt-lg-0">
      <li class="nav-item active">
        <a class="nav-link" href="#">Home <span class="sr-only">(current)</span></a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="#">Link</a>
      </li>
      <li class="nav-item">
        <a class="nav-link disabled" href="#">Disabled</a>
      </li>
    </ul>
    <form class="form-inline my-2 my-lg-0">
      <input class="form-control mr-sm-2" type="search" placeholder="Search" aria-label="Search">
      <button class="btn btn-outline-success my-2 my-sm-0" type="submit">Search</button>
    </form>
  </div>
</nav>
<div *ngIf="loginService.user$ | async">
  <!-- template will replace this div -->
</div>