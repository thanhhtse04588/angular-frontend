<!--Main layout-->
<main *ngIf="place">
  <div class="container">
    <!--Section: Main info-->
    <section class="mt-5 wow fadeIn">
      <!--Grid row-->
      <div class="row">
        <!--Grid column-->
        <div class="col-md-12 mb-4">
          <mdb-card>
            <mdb-card-body class="p-5">
              <mdb-card-title class="text-center">
                <h3>
                  <strong>{{place.title}}</strong>
                </h3>
                <h5>
                  <span>Loại: <strong>{{place.roleOfPlace}}</strong></span>
                  <span>Giá: <strong>{{place.price| number}} vnđ/tháng</strong></span>
                  <span>Diện tích: <strong>{{place.area}} m²</strong></span>
                  <span>Khu vực: <strong>{{place.district}}</strong></span>
                </h5>
                <div class="mx-auto ">

                  <button [disabled]="!loginService.isUserLoggedIn()" mdbBtn class="btn btn-warning btn-lg"
                    data-toggle="modal" data-target="#frameDeposit" (click)="frameDeposit.show()"
                    mdbWavesEffect>
                    <strong>Đặt lịch xem</strong>
                  </button>

                </div>
                <div *ngIf="!loginService.isUserLoggedIn()" class="alert alert-warning" role="alert">
                  Bạn cần <a routerLink="/login" routerLinkActive="active">đăng nhập</a> để sử dụng
                </div>
              </mdb-card-title>
              <mdb-card-text class="pl-5">
                <h4><strong>Thông tin chi tiết</strong></h4>
                <h5><strong>Địa chỉ:</strong></h5>
                <p>{{place.address}}</p>
                <h5><strong>Tiện ích:</strong></h5>
                <ul>
                  <li>Phòng ngủ :{{place.bedRooms}} phòng</li>
                  <li>Vệ sinh :{{place.toilets}} phòng </li>
                  <li>Tầm nhìn :{{place.counterView}} </li>
                  <li>Mặt đường :{{place.frontispiece}} m2 </li>
                  <li>Hướng nhà :{{place.homeDirection}} </li>
                </ul>

                <hr>
                <p>{{place.description}}</p>
              </mdb-card-text>
            </mdb-card-body>
            <!--Grid column-->
          </mdb-card>
        </div>
      </div>

      <!--Grid row-->
      <div class="row">
        <div class="col-md-6 mb-4">
          <div class="view overlay rounded z-depth-1 text-center">
            <h5 class="my-3"><strong>Hình ảnh mô tả</strong></h5>
            <!--Carousel Wrapper-->
            <div id="carousel-example-1z" class="carousel slide carousel-fade" data-ride="carousel">

              <!--Indicators-->
              <ol class="carousel-indicators">
                <li data-target="#carousel-example-1z" data-slide-to="0" class="active"></li>
                <li *ngFor="let img of images" data-target="#carousel-example-1z" data-slide-to="1"></li>
              </ol>
              <!--/.Indicators-->

              <!--Slides-->
              <div class="carousel-inner" role="listbox">
                <!--Foreach slide-->
                <div *ngFor="let img of images" class="carousel-item">
                  <div class="view"
                    style="background-image: url({{img}}); background-repeat: no-repeat; background-size: cover;">

                    <!-- Mask & flexbox options-->
                    <div class="mask rgba-black-light d-flex justify-content-center align-items-center">

                    </div>
                    <!-- Mask & flexbox options-->

                  </div>
                </div>
                <!--/Foreach slide-->

              </div>
              <!--/.Slides-->

              <!--Controls-->
              <a class="carousel-control-prev" role="button" data-slide="prev">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                <span class="sr-only">Previous</span>
              </a>
              <a class="carousel-control-next" role="button" data-slide="next">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                <span class="sr-only">Next</span>
              </a>
              <!--/.Controls-->

            </div>
          </div>
          <!--/.Carousel Wrapper-->
        </div>
        <div class="col-md-6 mb-4">
          <div class="view overlay rounded z-depth-1 text-center">
            <h5 class="my-3"><strong>Vị trí bất động sản trên bản đồ</strong></h5>
            <agm-map style="height: 577px;" [latitude]="place.longtitude" [longitude]="place.latitude" [zoom]="15">
              <agm-marker [latitude]="place.longtitude" [longitude]="place.latitude" label="Vị trí bất động sản">
              </agm-marker>
            </agm-map>
          </div>
        </div>

      </div>
    </section>
  </div>
</main>


<!-- OrderModal -->
<form (ngSubmit)="onSubmitOrder()" [formGroup]="requestOrderForm">
  <div mdbModal #frameOrder="mdbModal" class="modal fade left" id="frameModalTop" tabindex="-1" role="dialog"
    aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header text-center">
          <h4 class="modal-title w-100 font-weight-bold">Mẫu liên hệ</h4>
        </div>
        <div class="modal-body mx-3">

          <div class="md-form mb-5">
            <mdb-icon fas icon="user" class="prefix grey-text"></mdb-icon>
            <input type="text" id="form34" class="form-control" mdbInput mdbValidate formControlName="name">
            <label for="form34">Nhập Tên<span class="text-danger">*</span></label>
            <mdb-error *ngIf="name.invalid && (name.dirty || name.touched)">
              Không hợp lệ
            </mdb-error>
            <mdb-success *ngIf="name.valid && (name.dirty || name.touched)">
              <i class="fas fa-check"></i>
            </mdb-success>
          </div>

          <div class="md-form mb-5">
            <mdb-icon fas icon="envelope" class="prefix grey-text"></mdb-icon>
            <input type="text"  id="form34" class="form-control" mdbInput mdbValidate formControlName="email">
            <label for="form34">Nhập Email<span class="text-danger">*</span></label>
            <mdb-error *ngIf="email.invalid && (email.dirty || email.touched)">
              Không hợp lệ
            </mdb-error>
            <mdb-success *ngIf="email.valid && (email.dirty || email.touched)">
              <i class="fas fa-check"></i>
            </mdb-success>
          </div>

          <div class="md-form mb-5">
            <mdb-icon fas icon="phone" class="prefix grey-text"></mdb-icon>

            <input type="number" id="form29" class="form-control" mdbInput mdbValidate
              formControlName="phoneNumber">
            <label for="form29">Nhập số điện thoại<span class="text-danger">*</span></label>
            <mdb-error *ngIf="phoneNumber.invalid && (phoneNumber.dirty || phoneNumber.touched)">
              Không hợp lệ
            </mdb-error>
            <mdb-success *ngIf="phoneNumber.valid && (phoneNumber.dirty || phoneNumber.touched)">
              <i class="fas fa-check"></i>
            </mdb-success>
          </div>

          <div class="md-form mb-5">
            <mdb-icon fas icon="calendar" class="prefix grey-text"></mdb-icon>
            <input type="date" id="form32" class="form-control" mdbInput mdbValidate formControlName="dateTime">
            <label for="form32">Chọn ngày<span class="text-danger">*</span></label>
            <mdb-error *ngIf="dateTime.invalid && (dateTime.dirty || dateTime.touched)">
              Không hợp lệ
            </mdb-error>
            <mdb-success *ngIf="dateTime.valid && (dateTime.dirty || dateTime.touched)">
              <i class="fas fa-check"></i>
            </mdb-success>
          </div>

          <div class="md-form">
            <mdb-icon fas icon="pencil-alt" class="prefix grey-text"></mdb-icon>
            <textarea type="text" id="form8" class="md-textarea form-control" rows="1" mdbInput mdbValidate
              formControlName="mess"></textarea>
            <label for="form8">Lời nhắn</label>
            <mdb-error *ngIf="mess.invalid && (mess.dirty || mess.touched)">
              Không hợp lệ
            </mdb-error>
            <mdb-success *ngIf="mess.valid && (mess.dirty || mess.touched)">
              <i class="fas fa-check"></i>
            </mdb-success>
          </div>

        </div>
        <div class=" row modal-footer d-flex justify-content-center">
          <button type="submit" mdbBtn class="btn btn-danger  my-4" [disabled]="!requestOrderForm.valid" mdbWavesEffect>
            <strong>Gửi</strong>
            <mdb-icon far icon="paper-plane" class="ml-1"></mdb-icon>
          </button>
        </div>
      </div>
    </div>
  </div>
</form>


<div mdbModal #frameDeposit="mdbModal" class="modal fade top" id="frameModalTop" tabindex="-1" role="dialog"
  aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-notify modal-warning" role="document">
    <!--Content-->
    <div class="modal-content">
      <!--Header-->
      <div class="modal-header">
        <p class="heading lead">Xác nhận đặt lịch xem</p>

        <button type="button" class="close" data-dismiss="modal" aria-label="Close" (click)="frameDeposit.hide()">
          <span aria-hidden="true" class="white-text">&times;</span>
        </button>
      </div>

      <!--Body-->
      <div class="modal-body">
        <div class="text-center">
          <mdb-icon fas icon="check" size="4x" class="mb-3 animated rotateIn"></mdb-icon>
          <p>Bạn cần mất một khoản phí là <strong>100$</strong> để đặt trước giữ nhà,bạn có thể thanh toán ở bằng tài khoản paypal</p>
        </div>
      </div>

      <!--Footer-->
      <div class="modal-footer justify-content-center">
        <div #paypal></div>
        <a type="button" mdbBtn color="warning" outline="true" class="waves-effect" mdbWavesEffect
          (click)="frameDeposit.hide()">No, thanks</a>
      </div>
    </div>
    <!--/.Content-->
  </div>
</div>


<div mdbModal #frameDepositSuccess="mdbModal" class="modal fade top" id="frameModalTop" tabindex="-1" role="dialog"
  aria-labelledby="myModalLabel" aria-hidden="true">

  <div *ngIf=paidFor class="modal-dialog modal-notify modal-success" role="document">
    <!--Content-->
    <div class="modal-content">
      <!--Header-->
      <div class="modal-header">
        <p class="heading lead">Thanh toán thành công</p>
      </div>
  
      <!--Body-->
      <div class="modal-body">
        <div class="text-center">
          <mdb-icon fas icon="check" size="4x" class="mb-3 animated rotateIn"></mdb-icon>
          <p>Đặt cọc xem nhà thanh công, để tiếp tục quá trình đặt lịch xem nhà, bấm <strong>Tiếp tục</strong></p>
        </div>
      </div>
  
      <!--Footer-->
      <div class="modal-footer justify-content-center">
        <div #paypal></div>
        <a type="button" (click)="frameOrder.show()" mdbBtn color="success" outline="true"  class="waves-effect" mdbWavesEffect
          (click)="frameDepositSuccess.hide()">Tiếp tục</a>
      </div>
    </div>
    <!--/.Content-->
  </div></div>



<script type="text/javascript">
  // Animations initialization
  new WOW().init();

</script>